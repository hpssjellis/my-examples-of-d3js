<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>vis.js: Timeline — Mouseover Demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://unpkg.com/vis-timeline@7.7.3/standalone/umd/vis-timeline-graph2d.min.js"></script>
</head>
<body style="font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; line-height:1.35; margin:16px;">

  <h1 style="margin:0 0 8px 0;">vis.js Timeline Demo with Mouseover</h1>
  <p style="margin:0 0 16px 0;">
    **Hover over an item** to see its content, start date, and end date in a tooltip.
  </p>

    <h2 style="margin:24px 0 8px 0;">Timeline</h2>
  <div id="myTimeline" style="width:100%; height:240px; border:1px solid #ccc; border-radius:10px;"></div>
  <div style="margin:8px 0;">
    <input type="button" value="Add Today Item" onclick="myAddTodayItem()" style="padding:6px 10px; border-radius:10px; border:1px solid #888; cursor:pointer;">
    <input type="button" value="Focus Latest" onclick="myFocusLatestTimelineItem()" style="padding:6px 10px; border-radius:10px; border:1px solid #888; cursor:pointer; margin-left:4px;">
    <input type="button" value="Zoom In" onclick="myTimelineZoomIn()" style="padding:6px 10px; border-radius:10px; border:1px solid #888; cursor:pointer; margin-left:4px;">
    <input type="button" value="Zoom Out" onclick="myTimelineZoomOut()" style="padding:6px 10px; border-radius:10px; border:1px solid #888; cursor:pointer; margin-left:4px;">
  </div>

  <script>
    // ========== TIMELINE ==========
    let myTimelineInstance, myTimelineItems;

    function myInitTimeline() {
      const myContainer = document.getElementById('myTimeline');
      myTimelineItems = new vis.DataSet([
        { id: 1, content: 'Kickoff', start: '2025-09-01' },
        { id: 2, content: 'Prototype', start: '2025-09-05', end: '2025-09-08' },
        { id: 3, content: 'Review', start: '2025-09-10' }
      ]);

      // The format function for dates
      const myFormatDate = (myDateString) => {
        if (!myDateString) return 'N/A';
        // Use the start part of the ISO string (YYYY-MM-DD)
        return new Date(myDateString).toISOString().slice(0, 10);
      };

      // The template function to generate the custom tooltip HTML
      const myItemTemplate = (myItem, myElement, myData) => {
        // Check if the item is a range (has an end date)
        const myIsRange = myItem.end;
        
        let myDatesHtml;
        if (myIsRange) {
          myDatesHtml = `
            <strong>Start:</strong> ${myFormatDate(myItem.start)}<br>
            <strong>End:</strong> ${myFormatDate(myItem.end)}
          `;
        } else {
          myDatesHtml = `
            <strong>Date:</strong> ${myFormatDate(myItem.start)}
          `;
        }
        
        // Return the HTML content for the tooltip
        return `
          <div style="padding: 8px; border: 1px solid #333; border-radius: 4px; background: #fff; box-shadow: 2px 2px 5px rgba(0,0,0,0.2);">
            <strong>Content:</strong> ${myItem.content}<br>
            ${myDatesHtml}
          </div>
        `;
      };

      const myOptions = {
        stack: true,
        zoomMin: 1000 * 60 * 60 * 24, // 1 day
        zoomMax: 1000 * 60 * 60 * 24 * 365, // ~1 year
        orientation: 'top',
        // The key addition for mouseover template
        template: myItemTemplate,
      };

      myTimelineInstance = new vis.Timeline(myContainer, myTimelineItems, myOptions);
      myTimelineInstance.fit();
    }

    function myAddTodayItem() {
      const myId = Date.now();
      const myToday = new Date();
      myTimelineItems.add({ id: myId, content: 'Today', start: myToday.toISOString().slice(0, 10) });
      myTimelineInstance.setSelection(myId, { focus: true });
    }

    function myFocusLatestTimelineItem() {
      const myAll = myTimelineItems.get();
      if (myAll.length === 0) return;
      const mySorted = myAll.slice().sort((a, b) => new Date(a.start) - new Date(b.start));
      const myLast = mySorted[mySorted.length - 1];
      myTimelineInstance.setSelection(myLast.id, { focus: true });
    }

    function myTimelineZoomIn() {
      myTimelineInstance.zoomIn(0.5);
    }

    function myTimelineZoomOut() {
      myTimelineInstance.zoomOut(0.5);
    }

    // ========== BOOTSTRAP EVERYTHING ==========
    // Run immediately once page loads
    (function(){ myInitTimeline(); })();
  </script>

  <p style="margin-top:24px; font-size:12px; color:#555;">
    Notes: This demo uses the modern vis package from UNPKG CDN:
    <code>vis-timeline</code>.
  </p>
</body>
</html>
